<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## init

This function helps to initialize MySql Client
This function should be called before calling any other functions in this library

Best practice is to `import @aicore/libcommonutils` and call `getMySqlConfigs()` api to read values from of configs
from environment variables.

### Sample config

```json
    {
    "host": "localhost",
    "port": "3306",
    "database": "testdb",
    "user" : "root",
    "password": "1234"
    }
```

### Sample initialization code

```javascript
// set  following  environment variables to access database securely
// set MY_SQL_SERVER for mysql server
// set MY_SQL_SERVER_PORT to set server port
// set MY_SQL_SERVER_DB to specify database where database operations are conducted
// set MY_SQL_USER to specify database user
// set MY_SQL_PASSWORD to set mysql password

import {getMySqlConfigs} from "@aicore/libcommonutils";

const configs = getMySqlConfigs();
init(configs)

```

### Parameters

*   `config` **config** config to configure MySQL

Returns **[boolean][1]** true if connection is successful false otherwise*

## close

This function helps to close the database connection

Returns **void** 

## createTable

This function helps to create a  table in database
we have simplified our database schema, for us, our database has only two columns

1.  `primary key` column, which is a varchar(255)
2.  `JSON` column, which stores values corresponding to the primary key as `JSON`

using this approach will simplify our database design by delegating the handling of the semantics of data to the application
To speed up any query, we have provided an option to add a secondary index for JSON fields using
`createIndexForJsonField` api.

### How to use this function?.

```javascript
import {getMySqlConfigs} from "@aicore/libcommonutils";

const configs = getMySqlConfigs();
init(configs)
const tableName = 'customer';
const nameOfPrimaryKey = 'name';
const nameOfJsonColumn = 'details';
await createTable(tableName, nameOfPrimaryKey, nameOfJsonColumn);
```

### Parameters

*   `tableName` **[string][2]** name of table to create
*   `nameOfPrimaryKey` **[string][2]** name of primary key
*   `nameOfJsonColumn` **[string][2]** name of JsonColumn

Returns **[Promise][3]** returns a `Promise` await on `Promise` to get status of `createTable`
`on success` await will return `true`. `on failure` await will throw an `exception`.

## put

It takes a table name, a primary key, a json column name, and a json value, and inserts the json value into the json
column. If the primary key already exists, it updates the json column with the new value

### Sample code

```javascript
try {
      const primaryKey = 'bob';
      const valueOfJson = {
          'lastName': 'Alice',
          'Age': 100,
          'active': true
      };
      await put('hello', nameOfPrimaryKey, primaryKey, nameOfJsonColumn, valueOfJson);
  } catch (e) {
      console.error(JSON.stringify(e));
 }
```

### Parameters

*   `tableName` **[string][2]** The name of the table in which you want to store the data.
*   `nameOfPrimaryKey` **[string][2]** The name of the primary key column in the table.
*   `primaryKey` **[string][2]** The primary key of the table.
*   `nameOfJsonColumn` **[string][2]** The name of the column in which you want to store the JSON string.
*   `valueForJsonColumn` **[string][2]** The JSON string that you want to store in the database.

Returns **[Promise][3]** A promise on resolving the promise will return true it put is successful throws an exception
otherwise

## deleteKey

It deletes a row from the database based on the primary key

### Sample code

```javascript
const tableName = 'customer';
const nameOfPrimaryKey = 'name';
const primaryKey = 'bob';
try {
   await deleteKey(tableName, nameOfPrimaryKey, primaryKey);
} catch(e) {
   console.error(JSON.stringify(e));
}

```

### Parameters

*   `tableName` **[string][2]** The name of the table in which the key is to be deleted.
*   `nameOfPrimaryKey` **[string][2]** The name of the primary key in the table.
*   `primaryKey` **[string][2]** The primary key of the row you want to delete.

Returns **any** A promise `resolve` promise to get status of delete. promise will resolve to true
for success and  throws an exception for failure.

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise
